var perf=angular.module("performance",[]);perf.directive("performance",[function(){return{restrict:"A",link:function(scope,element,attrs){var startTime=(new Date).getTime(),divs=[];scope.$on("PERF_DONE",function(event,args){var index=divs.indexOf(args);if(index>=0&&divs.splice(index,1),index>=0&&0==divs.length){var finishTime=(new Date).getTime()-startTime,initialLoad=0;window.performance&&(initialLoad=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart);var i=new Image;i.src=attrs.performanceBeacon+"?content="+finishTime+"&initial="+initialLoad+"&name="+attrs.performance}}),scope.$on("PERF_REGISTER",function(event,args){divs.push(args)})}}}]),perf.directive("performanceLoaded",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){$timeout(function(){scope.$emit("PERF_REGISTER",scope.$id)},0);var unwatchLoaded=scope.$watch(attrs.performanceLoaded,function(newValue,oldValue){newValue&&(scope.$emit("PERF_DONE",scope.$id),unwatchLoaded())})}}}]);
//# sourceMappingURL=angular-performance.min.js.map
